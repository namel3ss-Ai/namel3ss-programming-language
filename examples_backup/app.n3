app "CoffeeHub" connects to postgres "COFFEE_DB".

# Define theme colours and styles
theme:
  primary: "#795548"
  background: "#FFF8E1"
  text: "#3E2723"

# Define a dataset from a table with some operations
dataset "monthly_sales" from table sales:
  filter by: region == "EU"
  group by: month
  sum: revenue as total_revenue

page "Home" at "/":
  show text "Welcome to CoffeeHub!"
    color: var(--primary)
    size: large
    align: center
    weight: bold
  show chart "Revenue Growth" from dataset monthly_sales
    type: line
    x: month
    y: total_revenue
    color: var(--primary)
    title size: large
  show table "Recent Orders" from table orders
    columns: id, customer_name, total, status
    filter by: status == "Pending"

page "Feedback" at "/feedback":
  show form "Submit Feedback":
    fields: name, email: email, message
    on submit:
      show toast "Thank you for your feedback!"

page "Admin" at "/admin":
  show table "Orders" from table orders
    columns: id, customer_name, total, status
  action "Approve Order":
    when user clicks "Approve":
      update orders set status = "APPROVED"
      show toast "Order approved"
      go to page "Admin"