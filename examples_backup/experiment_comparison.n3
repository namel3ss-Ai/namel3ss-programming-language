app "Experiment Lab".

connector "anthropic" type llm:
  provider = "anthropic"
  model = "claude-3-haiku"

dataset "reviews" from csv "data/reviews.csv":
  columns: text, sentiment
  cache:
    strategy: memory

define template "rewrite":
  prompt = "Rewrite this feedback with a happier tone: {input}"

define chain "anthropic_rewrite":
  input -> template rewrite -> connector anthropic
  metadata:
    goal = "positive-tone"

model "local_baseline" using python:
  from dataset reviews
  target: sentiment
  registry:
    version: "v1"
    accuracy: 0.88

experiment "sentiment_playoff":
  description: "Compare local model vs anthropic rewrite chain"
  variants:
    baseline uses model local_baseline
    rewrite uses chain anthropic_rewrite
  metrics:
    accuracy goal 0.90
    latency_ms goal 250

page "Dashboard" at "/":
  show text "Experiment scoreboard loads via /api/experiments/sentiment_playoff/metrics"
