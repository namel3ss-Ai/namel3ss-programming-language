app "Demo API" connects to postgres "DEMO_DB" {
  description: "Demo API application"
}

dataset "active_users" from table users {
  filter: fn(row) => row.status == "active"
}

page "Home" at "/" {
  show text {
    content: "Welcome to Demo API"
  }
  show table {
    title: "Active Users"
    source: "active_users"
  }
}

page "Admin" at "/admin" {
  if user.role == "admin" {
    show text {
      content: "Admin Dashboard"
    }
    show table {
      title: "All Users"
      source: "users"
    }
  } else {
    show text {
      content: "Access Denied"
    }
  }
}
