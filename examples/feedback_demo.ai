# Feedback Components Demo - Modals & Toasts
# This example demonstrates Modal dialogs and Toast notifications

app "Feedback Demo"

# Main demo page with all feedback component examples
page "Feedback Demo" at "/":
    # Page chrome for navigation
    navbar:
        title: "Feedback Components Demo"
        action "Theme" icon "üé®" type "toggle"
        position: top
        sticky: true
    
    show text "Feedback Components Demonstration"
    show text "This demo showcases Modal dialogs and Toast notifications with various configurations."
    
    # === MODAL EXAMPLES ===
    
    # 1. Simple confirmation modal
    modal "confirm_delete":
        title: "Confirm Delete"
        description: "Are you sure you want to delete this item?"
        size: md
        dismissible: true
        trigger: "show_confirm_delete"
        content:
            show text "This action cannot be undone. The item will be permanently removed from the database."
        actions:
            action "Cancel" variant "ghost"
            action "Delete" variant "destructive" action "do_delete"
    
    # 2. Form modal with non-closing action
    modal "edit_profile":
        title: "Edit Profile"
        description: "Update your profile information"
        size: lg
        dismissible: true
        trigger: "show_edit_profile"
        content:
            show text "Name: John Doe"
            show text "Email: john@example.com"
            show text "Role: Administrator"
        actions:
            action "Cancel" variant "ghost"
            action "Save Draft" variant "default" action "save_draft" close: false
            action "Save & Close" variant "primary" action "save_profile"
    
    # 3. Information modal (small)
    modal "quick_tip":
        title: "Quick Tip"
        size: sm
        dismissible: true
        trigger: "show_quick_tip"
        content:
            show text "üí° Press Ctrl+K to open the command palette from anywhere!"
        actions:
            action "Got it" variant "primary"
    
    # 4. Large modal with multiple content blocks
    modal "terms_conditions":
        title: "Terms and Conditions"
        description: "Please read our terms carefully"
        size: xl
        dismissible: false
        trigger: "show_terms"
        content:
            show text "1. Acceptance of Terms"
            show text "By using this service, you agree to be bound by these terms and conditions."
            show text "2. User Responsibilities"
            show text "You are responsible for maintaining the confidentiality of your account."
            show text "3. Privacy Policy"
            show text "We respect your privacy and protect your personal information."
        actions:
            action "Decline" variant "ghost" action "decline_terms"
            action "Accept" variant "primary" action "accept_terms"
    
    # === TOAST EXAMPLES ===
    
    # 1. Success toast with action
    toast "save_success":
        title: "Changes Saved"
        description: "Your profile has been updated successfully"
        variant: success
        duration: 3000
        position: top-right
        action_label: "View"
        action: "view_profile"
        trigger: "show_save_success"
    
    # 2. Error toast (persistent)
    toast "connection_error":
        title: "Connection Failed"
        description: "Unable to connect to the server. Please check your internet connection."
        variant: error
        duration: 0
        position: top-right
        action_label: "Retry"
        action: "retry_connection"
        trigger: "show_connection_error"
    
    # 3. Warning toast (longer duration)
    toast "storage_warning":
        title: "Storage Almost Full"
        description: "You have used 90% of your storage quota"
        variant: warning
        duration: 5000
        position: bottom-right
        action_label: "Manage Storage"
        action: "manage_storage"
        trigger: "show_storage_warning"
    
    # 4. Info toast (top position)
    toast "update_available":
        title: "Update Available"
        description: "A new version of the app is available"
        variant: info
        duration: 4000
        position: top
        action_label: "Update Now"
        action: "start_update"
        trigger: "show_update_available"
    
    # 5. Simple default toast (bottom-left)
    toast "clipboard_copy":
        title: "Copied to Clipboard"
        variant: default
        duration: 2000
        position: bottom-left
        trigger: "show_clipboard_copy"
    
    # 6. Success toast without action (bottom)
    toast "item_deleted":
        title: "Item Deleted"
        description: "The item has been removed"
        variant: success
        duration: 3000
        position: bottom
        trigger: "show_item_deleted"
    
    show text "Feedback components provide essential user interaction patterns for modern web applications."

# Example page showing feedback in context
page "User Settings" at "/settings":
    navbar:
        title: "User Settings"
        position: top
    
    # Settings form with confirmation modal
    modal "confirm_reset":
        title: "Reset Settings"
        description: "This will restore all settings to their default values"
        size: md
        dismissible: true
        trigger: "show_confirm_reset"
        content:
            show text "‚ö†Ô∏è Warning: This action will reset:"
            show text "‚Ä¢ Theme preferences"
            show text "‚Ä¢ Notification settings"
            show text "‚Ä¢ Privacy options"
            show text "‚Ä¢ Display preferences"
        actions:
            action "Cancel" variant "ghost"
            action "Reset All" variant "destructive" action "reset_settings"
    
    # Success notification after reset
    toast "reset_complete":
        title: "Settings Reset"
        description: "All settings have been restored to defaults"
        variant: success
        duration: 3000
        position: top-right
        trigger: "show_reset_complete"
    
    show text "User Settings Page"
    show text "Configure your account preferences and privacy settings."

# Example page with batch operations
page "Data Management" at "/data":
    navbar:
        title: "Data Management"
        position: top
    
    # Batch delete confirmation
    modal "batch_delete":
        title: "Delete Multiple Items"
        description: "You are about to delete 15 items"
        size: md
        dismissible: true
        trigger: "show_batch_delete"
        content:
            show text "This will permanently delete:"
            show text "‚Ä¢ 8 documents"
            show text "‚Ä¢ 5 images"  
            show text "‚Ä¢ 2 videos"
        actions:
            action "Cancel" variant "ghost"
            action "Delete All" variant "destructive" action "batch_delete_items"
    
    # Progress notification
    toast "batch_progress":
        title: "Processing..."
        description: "Deleting items (5 of 15)"
        variant: info
        duration: 0
        position: bottom-right
        trigger: "show_batch_progress"
    
    # Completion notification
    toast "batch_complete":
        title: "Batch Delete Complete"
        description: "15 items have been deleted"
        variant: success
        duration: 3000
        position: bottom-right
        action_label: "Undo"
        action: "undo_batch_delete"
        trigger: "show_batch_complete"
    
    show text "Data Management Dashboard"
    show text "Manage your files, documents, and media assets."
