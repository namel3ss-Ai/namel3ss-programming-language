# Namel3ss Template Engine Examples

# Example 1: Simple variable substitution
prompt simple_greeting:
    name: "SimpleGreeting"
    template: "Hello {{ name }}!"
    model: "gpt-4"

# Example 2: Conditional instructions
prompt conditional_prompt:
    name: "ConditionalInstructions"
    template: """
You are a helpful assistant.

{% if formal %}
Please use formal, professional language in your response.
{% else %}
Feel free to use casual, friendly language.
{% endif %}

{% if max_words %}
Important: Limit your response to {{ max_words }} words.
{% endif %}

Question: {{ question }}
"""
    model: "gpt-4"

# Example 3: RAG with document loop
prompt rag_qa_prompt:
    name: "RAGQuestionAnswer"
    template: """
Answer the question based on the following context documents:

{% for doc in documents %}
## Document {{ loop.index }} (Relevance: {{ doc.score|default('N/A') }})
{{ doc.content|truncate(500) }}

Source: {{ doc.metadata.source }}
{% if doc.metadata.date %}Date: {{ doc.metadata.date|format_date('%Y-%m-%d') }}{% endif %}

{% endfor %}

Question: {{ question }}

Please provide a detailed answer based on the {{ documents|length }} documents above.
"""
    model: "gpt-4"

# Example 4: Few-shot learning
prompt few_shot_classifier:
    name: "FewShotClassifier"
    template: """
Task: {{ task }}

{% if instructions %}
Instructions:
{% for instruction in instructions %}
- {{ instruction }}
{% endfor %}
{% endif %}

Examples:
{% for example in examples %}
{{ loop.index }}. Input: {{ example.input }}
   Output: {{ example.output }}
{% endfor %}

Now perform the task on this new input:
Input: {{ input }}
Output:
"""
    model: "gpt-4"

# Example 5: Complex nested data
prompt user_profile_summary:
    name: "UserProfileSummary"
    template: """
Generate a summary for:

User: {{ user.profile.name|title }}
Email: {{ user.profile.email }}
Role: {{ user.permissions.role|uppercase }}

{% if user.activity %}
Recent Activity ({{ user.activity.items|length }} items):
{% for activity in user.activity.items %}
- {{ activity.timestamp|format_date('%Y-%m-%d %H:%M') }}: {{ activity.action }}
{% endfor %}
{% endif %}

{% if user.preferences %}
Preferences:
{% for key, value in user.preferences.items() %}
- {{ key|title }}: {{ value }}
{% endfor %}
{% endif %}

Please create a professional summary of this user's profile.
"""
    model: "gpt-4"

# Example 6: Chain with templates
chain rag_pipeline:
    # Retrieve documents
    docs = retrieve_documents(query)
    
    # Rerank for relevance
    ranked_docs = rerank(
        query=query,
        documents=docs,
        top_k=5
    )
    
    # Generate answer with template
    answer = rag_qa_prompt(
        question=query,
        documents=ranked_docs
    )
    
    return answer

# Example 7: Multi-turn conversation
prompt conversation_prompt:
    name: "ConversationPrompt"
    template: """
System: {{ system_message }}

{% if chat_history %}
Conversation History:
{% for msg in chat_history %}
{% if msg.role == 'user' %}
User: {{ msg.content }}
{% elif msg.role == 'assistant' %}
Assistant: {{ msg.content }}
{% endif %}
{% endfor %}
{% endif %}

User: {{ user_message }}
"""
    model: "gpt-4"

# Example 8: Structured output generation
prompt structured_extraction:
    name: "StructuredExtraction"
    template: """
Extract structured information from the text below.

Text: {{ input_text }}

Extract the following fields:
{% for field in required_fields %}
- {{ field.name }}: {{ field.description }}
{% endfor %}

{% if format %}
Output format: {{ format }}
{% endif %}

Please extract all information accurately.
"""
    model: "gpt-4"
    
# Example 9: Filter showcase
prompt filter_examples:
    name: "FilterExamples"
    template: """
Demonstrating template filters:

Original: {{ text }}
Uppercase: {{ text|uppercase }}
Truncated: {{ text|truncate(20) }}
Title case: {{ text|title }}

JSON data: {{ data|json_encode(2) }}

List: {{ items|list_join(' | ') }}
Length: {{ items|length }} items

Date: {{ timestamp|format_date('%B %d, %Y') }}
"""
    model: "gpt-4"
