{
  "projectId": "example-support-system",
  "name": "Customer Support Triage",
  "description": "Intelligent customer support ticket routing system that classifies tickets, determines urgency, and routes to appropriate teams",
  "nodes": [
    {
      "id": "start-1",
      "type": "start",
      "label": "START",
      "position": {"x": 100, "y": 100},
      "data": {}
    },
    {
      "id": "prompt-classify",
      "type": "prompt",
      "label": "Classify Ticket",
      "position": {"x": 100, "y": 200},
      "data": {
        "name": "classify_ticket",
        "text": "Classify this customer support ticket:\n\nTicket: {{ticket_text}}\nCustomer Tier: {{customer_tier}}\n\nAnalyze the ticket and provide structured output with category, urgency, and reasoning.",
        "model": "gpt-4",
        "arguments": ["ticket_text", "customer_tier"],
        "outputSchema": {
          "category": "string",
          "urgency": "string",
          "requires_human": "boolean",
          "confidence": "number",
          "reasoning": "string"
        }
      }
    },
    {
      "id": "condition-urgency",
      "type": "condition",
      "label": "Check Urgency",
      "position": {"x": 100, "y": 300},
      "data": {
        "expression": "classify_ticket.urgency == 'critical' or classify_ticket.urgency == 'high'",
        "description": "Route urgent tickets to escalation"
      }
    },
    {
      "id": "agent-escalate",
      "type": "agent",
      "label": "Escalation Agent",
      "position": {"x": 50, "y": 400},
      "data": {
        "name": "escalation_agent",
        "llm": "gpt-4",
        "systemPrompt": "You are an escalation specialist. Draft urgent notifications for critical tickets, including all key details and recommended actions.",
        "tools": ["send_slack_alert", "create_pagerduty_incident"],
        "maxTurns": 3,
        "temperature": 0.3,
        "goal": "Create escalation notification and trigger alerts"
      }
    },
    {
      "id": "agent-auto-respond",
      "type": "agent",
      "label": "Auto-Response Agent",
      "position": {"x": 150, "y": 400},
      "data": {
        "name": "auto_response_agent",
        "llm": "gpt-4-turbo",
        "systemPrompt": "You are a helpful customer support assistant. Generate appropriate responses based on ticket category and customer tier. Be professional and empathetic.",
        "tools": ["search_knowledge_base", "check_account_status"],
        "maxTurns": 5,
        "temperature": 0.7,
        "goal": "Generate helpful auto-response or suggest manual handling"
      }
    },
    {
      "id": "rag-knowledge",
      "type": "ragDataset",
      "label": "Knowledge Base Search",
      "position": {"x": 150, "y": 500},
      "data": {
        "name": "knowledge_base_search",
        "datasetName": "support_docs",
        "queryTemplate": "Find relevant documentation for: {{classify_ticket.category}}",
        "topK": 5,
        "queryEncoder": "text-embedding-3-small",
        "reranker": "bge-reranker-base",
        "distanceMetric": "cosine"
      }
    },
    {
      "id": "prompt-final-summary",
      "type": "prompt",
      "label": "Generate Summary",
      "position": {"x": 100, "y": 600},
      "data": {
        "name": "final_summary",
        "text": "Summarize the support ticket triage:\n\nClassification: {{classify_ticket}}\nActions Taken: {{actions}}\nKnowledge Base Results: {{knowledge_results}}\n\nProvide a concise summary for the support dashboard.",
        "model": "gpt-4",
        "arguments": ["classify_ticket", "actions", "knowledge_results"],
        "outputSchema": {
          "summary": "string",
          "next_steps": "array",
          "assigned_team": "string"
        }
      }
    },
    {
      "id": "end-1",
      "type": "end",
      "label": "END",
      "position": {"x": 100, "y": 700},
      "data": {}
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "start-1",
      "target": "prompt-classify"
    },
    {
      "id": "e2",
      "source": "prompt-classify",
      "target": "condition-urgency"
    },
    {
      "id": "e3",
      "source": "condition-urgency",
      "target": "agent-escalate",
      "label": "urgent"
    },
    {
      "id": "e4",
      "source": "condition-urgency",
      "target": "agent-auto-respond",
      "label": "normal"
    },
    {
      "id": "e5",
      "source": "agent-auto-respond",
      "target": "rag-knowledge"
    },
    {
      "id": "e6",
      "source": "agent-escalate",
      "target": "prompt-final-summary"
    },
    {
      "id": "e7",
      "source": "rag-knowledge",
      "target": "prompt-final-summary"
    },
    {
      "id": "e8",
      "source": "prompt-final-summary",
      "target": "end-1"
    }
  ],
  "metadata": {
    "version": "1.0",
    "author": "example",
    "tags": ["customer-support", "triage", "automation"],
    "estimated_cost_per_run": 0.05
  }
}
