<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin â€“ Demo API</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body data-n3-page-slug="admin" data-n3-page-reactive="false">
<nav><ul>
  <li><a href="index.html">Home</a></li>
  <li><a href="admin.html" class="active">Admin</a></li>
</ul></nav>
<h2>Admin</h2>
<div class="n3-page-errors n3-widget-errors n3-widget-errors--hidden" data-n3-page-errors></div>
<!-- If condition: BinaryOp(left=AttributeRef(base='user', attr='role'), op='==', right=Literal(value='admin')) -->
<div class="if-block" style="border-left: 3px solid #4CAF50; padding-left: 10px; margin: 10px 0;">
<p><em>If BinaryOp(left=AttributeRef(base='user', attr='role'), op='==', right=Literal(value='admin')):</em></p>
<p data-n3-text-template="Admin Dashboard">Admin Dashboard</p>
<section class="n3-widget n3-widget-table">
  <h3>All Users</h3>
  <div class="n3-table-container"><table id="table_admin_0" class="n3-table"></table></div>
  <div class="n3-widget-errors n3-widget-errors--hidden" data-n3-error-slot></div>
</section>
</div>
<div class="else-block" style="border-left: 3px solid #FF9800; padding-left: 10px; margin: 10px 0;">
<p><em>Else:</em></p>
<p data-n3-text-template="Access Denied">Access Denied</p>
</div>
<div id="toast" class="toast"></div>
<script src="scripts.js"></script>
<script>
(function() {
    var apiUrl = "/api/pages/admin";
    window.N3_VARS = window.N3_VARS || {};
    fetch(apiUrl, { headers: { 'Accept': 'application/json' } })
        .then(function(response) {
            if (!response.ok) {
                throw new Error('Failed to load page data: ' + response.status);
            }
            return response.json();
        })
        .then(function(data) {
            var vars = (data && data.vars) ? data.vars : {};
            window.N3_VARS = vars;
            if (window.N3Widgets && typeof window.N3Widgets.hydratePage === 'function') {
                window.N3Widgets.hydratePage("admin", data || {});
            }
            document.querySelectorAll('[data-n3-text-template]').forEach(function(el) {
                var tpl = el.getAttribute('data-n3-text-template') || '';
                el.textContent = tpl.replace(/\{([a-zA-Z_][a-zA-Z0-9_]*)\}/g, function(match, name) {
                    return Object.prototype.hasOwnProperty.call(vars, name) ? String(vars[name]) : '';
                });
            });
            if (window.N3Realtime && window.N3Realtime.applySnapshot) {
                window.N3Realtime.applySnapshot("admin", data || {}, { source: 'bootstrap' });
            }
        })
        .catch(function(err) {
            console.error('Namel3ss frontend bootstrap failed:', err);
        });
})();
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  if (window.N3Widgets && window.N3Widgets.bootstrap) { window.N3Widgets.bootstrap([{"type": "table", "id": "table_admin_0", "data": {"title": "All Users", "columns": ["id", "value", "status"], "rows": [{"id": 2834, "value": "Value 1", "status": "2024-01-01T20:02:00"}, {"id": 8183, "value": "Value 2", "status": "2024-01-01T20:36:00"}, {"id": 8321, "value": "Value 3", "status": "2024-01-01T16:47:00"}, {"id": 4128, "value": "Value 4", "status": "2024-01-01T12:46:00"}, {"id": 7000, "value": "Value 5", "status": "2024-01-01T16:00:00"}, {"id": 7637, "value": "Value 6", "status": "2024-01-01T10:27:00"}], "insight": null, "errors": []}, "layout": {}, "style": {}, "insight": null}]); }
});
</script>
</body>
</html>